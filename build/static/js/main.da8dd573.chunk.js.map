{"version":3,"sources":["components/Product.js","App.js","serviceWorker.js","index.js"],"names":["Product","productId","code","title","primaryImageUrl","assocProducts","unitFull","priceRetail","priceRetailAlt","priceGold","priceGoldAlt","useState","unitIsPackaging","setUnitIsPackaging","refNumberProduct","useRef","refSquareMeter","refPackaging","convertPrice","price","toFixed","replace","switchPrice","value","fromElement","toElement","current","classList","remove","add","id","className","href","src","argPrimaryImageUrl","splitUrl","split","join","addModificator","alt","arrayProducts","splice","map","productName","index","splitter","length","renderAssociatedProducts","unit","onClick","ref","renderProductUnits","version","xmlns","x","y","width","height","viewBox","enable-background","xmlSpace","xmlnsXlink","xlinkHref","Math","random","type","data-url","data-product-id","data","require","App","product","key","description","weight","unitRatio","unitAlt","unitRatioAlt","unitFullAlt","bonusAmount","hasAlternateUnit","isActive","modified","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.da8dd573.chunk.js","sourcesContent":["import React, { useState, useRef } from \"react\";\n\nconst Product = ({\n  productId,\n  code,\n  title,\n  primaryImageUrl,\n  assocProducts,\n  unitFull,\n  priceRetail,\n  priceRetailAlt,\n  priceGold,\n  priceGoldAlt,\n}) => {\n  const [unitIsPackaging, setUnitIsPackaging] = useState(false);\n  const refNumberProduct = useRef(null);\n  const refSquareMeter = useRef(null);\n  const refPackaging = useRef(null);\n\n  // --------- RENDER --------------\n  const generateBonusPoint = () => {\n    let random = Math.random();\n    return (+random * 1000).toFixed(2);\n  };\n\n  const addModificator = (argPrimaryImageUrl) => {\n    let splitUrl = argPrimaryImageUrl.split(\".\");\n    splitUrl[1] = splitUrl[1] + \"_220x220_1\";\n    return `http:${splitUrl.join(\".\")}`;\n  };\n\n  const renderAssociatedProducts = () => {\n    const arrayProducts = assocProducts.split(\";\");\n    arrayProducts.splice(-1, 1);\n    let render = arrayProducts.map((productName, index) => {\n      let splitter = index === arrayProducts.length - 1 ? \".\" : \",\";\n      if (productName) {\n        return (\n          <a href=\"#\" className=\"url--link\">\n            {\" \"}\n            {productName}\n            {splitter}\n          </a>\n        );\n      }\n    });\n    return render;\n  };\n\n  const renderProductUnits = () => {\n    let unit = false;\n    if (unitFull === \"упаковка\") {\n      unit = true;\n    }\n    return unit ? (\n      <>\n        <div\n          className=\"unit--select unit--active\"\n          onClick={() => switchPrice(false, refPackaging, refSquareMeter)}\n          ref={refSquareMeter}\n        >\n          <p className=\"ng-binding\">За м. кв.</p>\n        </div>\n        <div\n          className=\"unit--select\"\n          onClick={() => switchPrice(true, refSquareMeter, refPackaging)}\n          ref={refPackaging}\n        >\n          <p className=\"ng-binding\">За упаковку</p>\n        </div>\n      </>\n    ) : (\n      <div className=\"unit--select unit--active\">\n        <p className=\"ng-binding\">За штуку</p>\n      </div>\n    );\n  };\n\n  const convertPrice = (price) => {\n    return ` ${price.toFixed(2).replace(\".\", \",\")} `;\n  };\n\n  // --------- CLICK --------------\n\n  const incrementNumberProduct = () => {\n    refNumberProduct.current.value = ++refNumberProduct.current.value;\n  };\n\n  const decrementNumberProduct = () => {\n    if (refNumberProduct.current.value > 1) {\n      refNumberProduct.current.value = --refNumberProduct.current.value;\n    }\n  };\n\n  const switchPrice = (value, fromElement, toElement) => {\n    fromElement.current.classList.remove(\"unit--active\");\n    toElement.current.classList.add(\"unit--active\");\n    setUnitIsPackaging(value);\n  };\n\n  return (\n    <div id=\"products_section\">\n      <div className=\"products_page pg_0\">\n        <div className=\"product product_horizontal\">\n          <span className=\"product_code\">Код: {+code}</span>\n          <div className=\"product_status_tooltip_container\">\n            <span className=\"product_status\">Наличие</span>\n          </div>\n          <div className=\"product_photo\">\n            <a href=\"#\" className=\"url--link product__link\">\n              <img src={addModificator(primaryImageUrl)} alt=\"photo\" />\n            </a>\n          </div>\n          <div className=\"product_description\">\n            <a href=\"#\" className=\"product__link\">\n              {title}\n            </a>\n          </div>\n          <div className=\"product_tags hidden-sm\">\n            <p>Могут понадобиться: </p>\n            {renderAssociatedProducts()}\n          </div>\n          <div className=\"product_units\">\n            <div className=\"unit--wrapper\">{renderProductUnits()}</div>\n          </div>\n          <p className=\"product_price_club_card\">\n            <span className=\"product_price_club_card_text\">\n              По карте\n              <br />\n              клуба\n            </span>\n            <span className=\"goldPrice\">\n              {!unitIsPackaging\n                ? convertPrice(priceRetailAlt)\n                : convertPrice(priceGold)}\n            </span>\n            <span className=\"rouble__i black__i\">\n              <svg\n                version=\"1.0\"\n                id=\"rouble__b\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                x=\"0\"\n                y=\"0\"\n                width=\"30px\"\n                height=\"22px\"\n                viewBox=\"0 0 50 50\"\n                enable-background=\"new 0 0 50 50\"\n                xmlSpace=\"preserve\"\n              >\n                <use\n                  xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                  xlinkHref=\"#rouble_black\"\n                ></use>\n              </svg>\n            </span>\n          </p>\n          <p className=\"product_price_default\">\n            <span className=\"retailPrice\">\n              {!unitIsPackaging\n                ? convertPrice(priceGoldAlt)\n                : convertPrice(priceRetail)}\n            </span>\n            <span className=\"rouble__i black__i\">\n              <svg\n                version=\"1.0\"\n                id=\"rouble__g\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n                x=\"0\"\n                y=\"0\"\n                width=\"30px\"\n                height=\"22px\"\n                viewBox=\"0 0 50 50\"\n                enable-background=\"new 0 0 50 50\"\n                xmlSpace=\"preserve\"\n              >\n                <use\n                  xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                  xlinkHref=\"#rouble_gray\"\n                ></use>\n              </svg>\n            </span>\n          </p>\n          <div className=\"product_price_points\">\n            <p className=\"ng-binding\">\n              Можно купить за {generateBonusPoint()} балла\n            </p>\n          </div>\n          <div className=\"list--unit-padd\"></div>\n          {unitFull === \"упаковка\" ? (\n            <div className=\"list--unit-desc\">\n              <div className=\"unit--info\">\n                <div className=\"unit--desc-i\"></div>\n                <div className=\"unit--desc-t\">\n                  <p>\n                    <span className=\"ng-binding\">Продается упаковками:</span>\n                    <span className=\"unit--infoInn\">\n                      1 упак. = 2.47 м. кв.{\" \"}\n                    </span>\n                  </p>\n                </div>\n              </div>\n            </div>\n          ) : (\n            \"\"\n          )}\n          <div className=\"product__wrapper\">\n            <div className=\"product_count_wrapper\">\n              <div className=\"stepper\">\n                <input\n                  className=\"product__count stepper-input\"\n                  type=\"text\"\n                  value=\"1\"\n                  ref={refNumberProduct}\n                />\n                <span\n                  className=\"stepper-arrow up\"\n                  onClick={() => incrementNumberProduct()}\n                ></span>\n                <span\n                  className=\"stepper-arrow down\"\n                  onClick={() => decrementNumberProduct()}\n                ></span>\n              </div>\n            </div>\n            <span\n              className=\"btn btn_cart\"\n              data-url=\"/cart/\"\n              data-product-id={productId}\n            >\n              <svg className=\"ic ic_cart\">\n                <use\n                  xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n                  xlinkHref=\"#cart\"\n                ></use>\n              </svg>\n              <span className=\"ng-binding\">В корзину</span>\n            </span>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Product;\n","import React from 'react';\nimport Product from './components/Product';\nconst data = require('./products.json');\n\nfunction App() {\n  const renderProducts = () => {\n    let render = data.map(product=>{\n      return (\n        <div key={product.productId}>\n          <Product\n            productId={product.productId}\n            code={product.code}\n            title={product.title}\n            description={product.description}\n            primaryImageUrl={product.primaryImageUrl}\n            assocProducts={product.assocProducts}\n            weight={product.weight}\n            unit={product.unit}\n            unitFull={product.unitFull}\n            unitRatio={product.unitRatio}\n            unitAlt={product.unitAlt}\n            unitRatioAlt={product.unitRatioAlt}\n            unitFullAlt={product.unitFullAlt}\n            priceRetail={product.priceRetail}\n            priceRetailAlt={product.priceRetailAlt}\n            priceGold={product.priceGold}\n            priceGoldAlt={product.priceGoldAlt}\n            bonusAmount={product.bonusAmount}\n            hasAlternateUnit={product.hasAlternateUnit}\n            isActive={product.isActive}\n            modified={product.modified}\n          />\n        </div>\n      )\n    })\n    return render;\n  }\n\n  return (\n    <div className=\"App\">\n      {renderProducts()}\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}